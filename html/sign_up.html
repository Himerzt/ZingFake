<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="../css/style_sinup.css">
    <script src="https://kit.fontawesome.com/320fb117b2.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../css/bootstrap.min.css">
    <script src="../js/jquery-3.6.1.min.js"></script>
    <script src="../js/bootstrap.min.js"></script>
</head>
<body>
    <div class="main_html">
        <div class="menu_html">
            <div class="logo_img">
                <a href="../index.html">
                    <img src="../img/logo/main_logo.png" alt="">
                </a>
            </div>

            <ul class="menu1">
                <li><a href="#"><i class="fas fa-compact-disc"></i> Khám phá</a></li>
                <li><a href="#"><i class="fas fa-chart-line"></i></i> #zingchart</a></li>
                <li><a href="#"><i class="fas fa-podcast"></i> Radio <span>live</span></a></li>
                <li><a href="#"><i class="fas fa-headphones-alt"></i> Thư viện</a></li>
            </ul>

            <br>

            <ul class="menu2">
                <li><a href="#"><i class="fas fa-music"></i> Nhạc mới</a></li>
                <li><a href="#"><i class="fas fa-th"></i> Chủ đề</a></li>
                <li><a href="#"><i class="fas fa-star"></i> Top 100</a></li>                
            </ul>
            <div class="signIn">
                <a href="../html/sign_in.html">                
                  <button>Đăng nhập</button>
                </a>
            </div>         
        </div>

        <div class="body_html" style="    color: white;">
            <div class="find_bar">
                <div class="f_bar_find">
                    <li><a href=""><i class="fas fa-arrow-left"></i></a></li>
                    <li><a href=""><i class="fas fa-arrow-right"></i></a></li>
                    <div class="find_box">
                        <li><a href=""><i class="fas fa-search"></i></a><input type="text" name="" id="" placeholder="Tìm bài hát của bạn ..."></li>
                    </div>
                </div>

                <div class="f_bar_user">
                    <div class="download_box">
                        <li><a href=""><i class="fas fa-download"></i> &nbsp;&nbsp;&nbsp; Tải bản cho windows</a></li>
                    </div>
                    <li><a href=""><i class="fas fa-cog"></i></a></li>
                    <li><a href=""><i class="fas fa-user"></i></a></li>
                </div>
            </div>

            <div class="signin">
                <li>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#SignInModal">
                        Đăng ký
                    </button>
                </li>
                <center><h3>Danh sách tài khoản</h3></center>
                <table class="table table-borderd table-hover">
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Email</th>
                            <th>Họ tên</th>
                            <th>Mật khẩu</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>1</td>
                            <td>hufi@gmail.com</td>
                            <td>hufi</td>
                            <td>hufiii</td>
                        </tr>
                    </tbody>
                </table> 
            </div>

        </div>


    
        <div class="modal fade" id="SignInModal">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3>Tạo tài khoản của bạn</h3>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Đóng">
                            <span aria-hidden="true">&times;</span>
                        </button>                   
                    </div>
                    <div class="modal-body">
                        <form>
                            <div class="form-group">
                                <label for="reemailInput">Địa chỉ email</label>
                                <input required="required" type="email" class="form-control" id="reemailInput"
                                    aria-describedby="emailHelp" placeholder="Nhập địa chỉ email của bạn">
                                <span id="tb_Email_DK" style="color: red;"></span>
                            </div>
                            <div class="form-group">
                                <label for="repasswordInput">Mật khẩu</label>
                                <input required="required" type="password" class="form-control" id="repasswordInput"
                                    placeholder="Nhập mật khẩu của bạn">
                                <span id="tb_passDK" style="color: red;"></span>
    
                            </div>
                            <div class="form-group">
                                <label for="repassword">Xác nhận mật khẩu</label>
                                <input required="required" type="password" class="form-control" id="repassword"
                                    placeholder="Xác nhận mật khẩu">
                                <span id="tb_repassDK" style="color: red;"></span>
                                    
                            </div>
                            <div class="form-group">
                                <label for="fnameInput">Nhập họ tên</label>
                                <input required="required" type="text" class="form-control" id="fnameInput"
                                    placeholder="Họ và tên">
                                    <span id="tb_HoTen" style="color: red;"></span>
                            </div>
                        </form>
                    </div>
                    <div class="modal-footer"></div>
                    <button id="dangki-btn" type="button" class="btn btn-primary" data-dismiss="modal">Đăng kí</button>
                </div>
            </div>
        </div>
       
    
    
    
       <script>
            function KTDangKy(){
                    var rgc = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                    if(  rgc.test($("#reemailInput").val()) == true ) {
                        $("#tb_Email_DK").html("Email hợp lệ");  
                        return true;
                    } else {
                        $("#tb_Email_DK").html("Email không hợp lệ");          
                        return false;
                    }
            }               
            $("#reemailInput").blur(KTDangKy);
    
            function KTDangKyMK(){
                    var rgc = /^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]{10,20}$/;
                    if(  rgc.test($("#repasswordInput").val()) == true ) {
                        $("#tb_passDK").html("Mật khẩu hợp lệ");  
                        return true;
                    } else {
                        $("#tb_passDK").html("Mật khẩu không hợp lệ");          
                        return false;
                    }
            }
            $("#repasswordInput").blur(KTDangKyMK);
    
    
            function KiemtraNhapLaiMK(){
                const passwordInput = document.getElementById("repasswordInput");
                const password = passwordInput.value;
    
                const confirmPasswordInput = document.getElementById("repassword");
                const confirmPassword = confirmPasswordInput.value;
                if (password === confirmPassword){
                    $("#tb_repassDK").html("Mật khẩu đã trung khớp");  
                        return true;
                    } else {
                        $("#tb_repassDK").html("Mật khẩu không trùng khớp");          
                        return false;
                    }
            }
            $("#repassword").blur(KiemtraNhapLaiMK);
    
    
            function KiemtraHoTen() {
                var rgc = /^[A-Z][a-z]*(\s[A-Z][a-z]*)*$/;
                if(  rgc.test($("#fnameInput").val()) == true ) {
                        $("#tb_HoTen").html("Tên hợp lệ");  
                        return true;
                    } else {
                        $("#tb_HoTen").html("Tên không hợp lệ");          
                        return false;
                    }
            }
            $("#fnameInput").blur(KiemtraHoTen);
            
            var i = 1;
    
            $("#dangki-btn").click(function(){    
                i = i + 1 ;       
                if ( !KTDangKy() || !KTDangKyMK() || !KiemtraNhapLaiMK || !KiemtraHoTen ){
                    alert("Mời bạn nhập đúng và đủ thông tin");
                    return false;
                } else {
                    var email = $("#reemailInput").val();
                    var passs = $("#repasswordInput").val();
                    var namee = $("#fnameInput").val();
    
                    // Kiểm tra email đã tồn tại trong local storage hay chưa
                    var users = JSON.parse(localStorage.getItem('users') || '[]');
                    var isEmailExist = users.some(function(user) {
                        return user.email === email;
                    });
    
                    if (isEmailExist) {
                        alert('Email đã tồn tại');
                        return false;
                    }
    
                    // Lưu thông tin vào local storage
                    var newUser = {
                        email: email,
                        password: passs,
                        name: namee
                    };
                    users.push(newUser);
                    localStorage.setItem('users', JSON.stringify(users));
    
                    var them1 = "<tr> <td>" + (i) + "</td><td>" + email + "</td><td>" +  namee + "</td><td>" + passs + "</td></tr>";
                    $("table tbody").append(them1);
                    $("#SignInModal").modal("hide");
                    return true;
                }
            });            
       </script>
</body>
</html>